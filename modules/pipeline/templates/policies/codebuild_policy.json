{
    "Version": "2012-10-17",
    "Statement": [
      {
        "Effect": "Allow",
        "Resource": [
          "*"
        ],
        "Action": [
          "iam:*",
          "s3:CreateBucket",
          "s3:ListObjects",
          "s3:GetObjectAcl",
          "s3:GetObjectVersionAcl",
          "s3:DeleteObject",
          "s3:HeadBucket",
          "s3:GetBucketNotification",
          "s3:PutObject",
          "s3:GetObject",
          "s3:GetBucketTagging",
          "s3:ListBucketVersions",
          "s3:ListBucket",
          "s3:GetBucketPolicy",
          "s3:DeleteBucket",
          "s3:PutBucketVersioning",
          "s3:GetBucketAcl",
          "s3:ListAllMyBuckets",
          "s3:GetBucketLocation",
          "s3:GetObjectVersion",
          "dynamodb:DeleteTable",
          "dynamodb:DescribeTable",
          "dynamodb:DescribeContinuousBackups",
          "dynamodb:UpdateTable",
          "dynamodb:ListTables",
          "dynamodb:ListTagsOfResource",
          "dynamodb:CreateBackup",
          "dynamodb:CreateTable",
          "dynamodb:DescribeReservedCapacity",
          "dynamodb:DescribeReservedCapacityOfferings",
          "dynamodb:TagResource",
          "dynamodb:DescribeLimits",
          "dynamodb:ListBackups",
          "dynamodb:DescribeStream",
          "dynamodb:DescribeTimeToLive",
          "dynamodb:UntagResource",
          "dynamodb:ListStreams",
          "dynamodb:RestoreTableFromBackup",
          "dynamodb:DeleteBackup",
          "dynamodb:GetRecords",
          "dynamodb:GetShardIterator",
          "dynamodb:DescribeStream",
          "dynamodb:ListStreams",
          "apigateway:GET",
          "apigateway:DELETE",
          "apigateway:PATCH",
          "apigateway:PUT",
          "apigateway:OPTIONS",
          "apigateway:POST",
          "apigateway:HEAD",
          "sqs:GetQueueUrl",
          "sqs:GetQueueAttributes",
          "sqs:PurgeQueue",
          "sqs:DeleteQueue",
          "sqs:ListQueueTags",
          "sqs:ChangeMessageVisibilityBatch",
          "sqs:SetQueueAttributes",
          "sqs:ListQueues",
          "sqs:ChangeMessageVisibility",
          "sqs:TagQueue",
          "sqs:ListDeadLetterSourceQueues",
          "sqs:CreateQueue",
          "lambda:*",
          "cloudformation:*",
          "logs:*",
          "events:*",
          "iam:PassRole"
        ]
      },
      {
        "Effect":"Allow",
        "Action": [
          "s3:GetObject",
          "s3:GetObjectVersion",
          "s3:GetBucketVersioning",
          "s3:List*",
          "s3:PutObject"
        ],
        "Resource": [
          "${aws_s3_bucket_arn}",
          "${aws_s3_bucket_arn}/*"
        ]
      }
    ]
  }